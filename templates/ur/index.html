<!DOCTYPE html>
<html lang="ur">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="AIResQ ClimSols - Flood monitoring and volunteer coordination platform">
    <meta name="theme-color" content="#0D9589">
    <title>AIResQ ClimSols - Flood Depth Reporting</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/index.css">
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <a href="/" class="logo">
                <img src="/static/airesq_dark.png" alt="AIResQ">
                <span>AIResQ ClimSols</span>
            </a>
            <div class="nav-links">
                <button class="nav-link active" onclick="showPage('crowdsource')">سیلاب کی اطلاع دیں</button>
                <button class="nav-link" onclick="showPage('volunteer')">رضاکار</button>
                <button class="nav-link" onclick="showPage('about')">ہمارے بارے میں</button>

                <!-- Language Selector -->
                <div class="lang-dropdown" id="langDropdown">
                    <button class="lang-btn" onclick="toggleLangMenu(event)">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"></circle>
                            <path d="M2 12h20"></path>
                            <path
                                d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z">
                            </path>
                        </svg>
                        <span>اردو</span>
                    </button>
                    <div class="lang-menu">
                        <button class="lang-menu-item" data-lang="en" onclick="switchLanguage('en')">English</button>
                        <button class="lang-menu-item" data-lang="hn" onclick="switchLanguage('hn')">हिंदी
                            (Hindi)</button>
                        <div class="lang-menu-divider"></div>
                        <div class="lang-submenu-wrapper" id="indicSubmenu">
                            <button class="lang-menu-item" onclick="toggleIndicSubmenu(event)">
                                ہندوستانی زبانیں
                                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="9 18 15 12 9 6"></polyline>
                                </svg>
                            </button>
                            <div class="lang-submenu">
                                <button class="lang-menu-item" data-lang="bn"
                                    onclick="switchLanguage('bn')">বাংলা</button>
                                <button class="lang-menu-item" data-lang="ta"
                                    onclick="switchLanguage('ta')">தமிழ்</button>
                                <button class="lang-menu-item" data-lang="te"
                                    onclick="switchLanguage('te')">తెలుగు</button>
                                <button class="lang-menu-item" data-lang="mr"
                                    onclick="switchLanguage('mr')">मराठी</button>
                                <button class="lang-menu-item" data-lang="gu"
                                    onclick="switchLanguage('gu')">ગુજરાતી</button>
                                <button class="lang-menu-item" data-lang="kn"
                                    onclick="switchLanguage('kn')">ಕನ್ನಡ</button>
                                <button class="lang-menu-item" data-lang="ml"
                                    onclick="switchLanguage('ml')">മലയാളം</button>
                                <button class="lang-menu-item" data-lang="pa"
                                    onclick="switchLanguage('pa')">ਪੰਜਾਬੀ</button>
                                <button class="lang-menu-item" data-lang="or"
                                    onclick="switchLanguage('or')">ଓଡ଼ିଆ</button>
                                <button class="lang-menu-item" data-lang="as"
                                    onclick="switchLanguage('as')">অসমীয়া</button>
                                <button class="lang-menu-item" data-lang="ur"
                                    onclick="switchLanguage('ur')">اردو</button>
                            </div>
                        </div>
                    </div>
                </div>

                <a href="/admin" class="nav-link admin-link">منتظم</a>
            </div>
        </div>
    </nav>

    <main class="page-content">
        <div class="container">
            <!-- CrowdSource Page -->
            <div id="crowdsourcePage">
                <h1 class="page-title">سیلاب کی گہرائی کی اطلاع دیں</h1>
                <p class="page-subtitle">حوالہ تصویر کے ساتھ رپورٹ جمع کرا کر اپنے علاقے میں سیلاب کی سطح کی نگرانی میں مدد کریں</p>

                <form id="reportForm" class="card" enctype="multipart/form-data">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>نام</label>
                            <input type="text" name="name" class="form-input" placeholder="">
                        </div>
                        <div class="form-group">
                            <label>فون</label>
                            <input type="tel" name="phone" id="phone" class="form-input" placeholder="" minlength="10">
                        </div>
                        <div class="form-group">
                            <label>گلی/علاقہ</label>
                            <input type="text" name="street" id="street" class="form-input" placeholder="">
                        </div>
                        <div class="form-group">
                            <label>زون/علاقہ</label>
                            <input type="text" id="zone" name="zone" class="form-input" placeholder="">
                        </div>
                        <!-- <div class="form-group">
                            <label>وارڈ</label>
                            <input type="text" name="ward" class="form-input" placeholder="">
                        </div> -->
                    </div>

                    <div class="form-group">
                        <label>حوالہ شے</label>
                        <div class="reference-selector">
                            <div class="reference-option selected" data-type="car">کار</div>
                            <div class="reference-option" data-type="autorickshaw">آٹو</div>
                            <div class="reference-option" data-type="bike">بائیک</div>
                            <div class="reference-option" data-type="cycle">سائیکل</div>
                            <div class="reference-option" data-type="person">شخص</div>
                        </div>
                        <input type="hidden" name="vehicle_type" id="vehicle_type" value="car">
                        
                        <!-- Person Height Adjustment Section -->
                        <div id="heightAdjustmentSection" class="height-adjustment hidden">
                            <div class="height-input-row">
                                <label for="personHeightFeet">آپ کی اونچائی:</label>
                                <input type="number" id="personHeightFeet" value="6" min="3" max="7" step="1" class="height-feet">
                                <span class="height-label">فٹ</span>
                                <input type="number" id="personHeightInches" value="0" min="0" max="11" step="1" class="height-inches">
                                <span class="height-label">انچ</span>
                                <span class="height-cm-display">(183 سینٹی میٹر)</span>
                            </div>
                            <div class="height-presets">
                                <button type="button" class="height-preset" data-feet="5" data-inches="0">5'0"</button>
                                <button type="button" class="height-preset" data-feet="5" data-inches="4">5'4"</button>
                                <button type="button" class="height-preset" data-feet="5" data-inches="7">5'7"</button>
                                <button type="button" class="height-preset active" data-feet="6" data-inches="0">6'0"</button>
                                <button type="button" class="height-preset" data-feet="6" data-inches="2">6'2"</button>
                            </div>
                            <p class="height-calibration-note">ڈیفالٹ: 6 فٹ (183 سینٹی میٹر)۔ درست گہرائی کے حساب کے لیے اپنی اونچائی کے مطابق ایڈجسٹ کریں۔</p>
                        </div>
                    </div>

                    <div class="depth-section">
                        <div class="depth-header">
                            <div class="depth-display">
                                <span class="depth-value" id="depthValue">0</span>
                                <span class="depth-unit-label" id="depthUnitLabel">میٹر</span>
                            </div>
                            <span class="depth-status" id="depthStatus">سیلاب نہیں</span>
                        </div>

                        <!-- Unit Selector -->
                        <div class="unit-selector">
                            <button type="button" class="unit-btn active" data-unit="meter">میٹر</button>
                            <button type="button" class="unit-btn" data-unit="feet">فٹ</button>
                            <button type="button" class="unit-btn" data-unit="cm">سینٹی میٹر</button>
                        </div>

                        <!-- Water Animation Visualization -->
                        <div class="depth-visual-container">
                            <div class="reference-display" id="referenceDisplay">
                                <img id="referenceImg" src="/static/carsvg.svg" alt="حوالہ">
                            </div>
                            <div class="water-level" id="waterLevel">
                                <div class="water-wave"></div>
                            </div>
                        </div>

                        <div class="depth-controls">
                            <div class="slider-row">
                                <span>0</span>
                                <input type="range" name="flood_depth_cm" id="flood_depth_cm" min="0" max="200"
                                    value="0">
                                <span>200</span>
                            </div>
                            <div class="depth-input-group">
                                <label for="depth_input">گہرائی:</label>
                                <input type="number" id="depth_input" min="0" max="200" value="0" step="any">
                                <span id="inputUnit">میٹر</span>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>تصویر</label>
                        <div class="photo-buttons">
                            <button type="button" class="btn btn-primary" onclick="openGallery()">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <rect x="3" y="3" width="18" height="18" rx="2" />
                                    <circle cx="8.5" cy="8.5" r="1.5" />
                                    <path d="m21 15-5-5L5 21" />
                                </svg>
                                گیلری
                            </button>
                            <button type="button" class="btn btn-primary" onclick="openCamera()">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path
                                        d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z" />
                                    <circle cx="12" cy="13" r="4" />
                                </svg>
                                کیمرہ
                            </button>
                        </div>
                        <input type="file" name="photo" id="photo" accept="image/*" style="display: none;"
                            onchange="handlePhotoSelect(this)">
                        <input type="file" id="photoGallery" accept="image/*" style="display: none;"
                            onchange="handlePhotoSelect(this)">
                        <div id="photoPreview" style="margin-top: 12px; display: none;">
                            <img id="previewImg"
                                style="max-width: 200px; max-height: 150px; border-radius: 8px; border: 1px solid var(--border);">
                            <p id="photoName"
                                style="margin-top: 6px; font-size: 0.85rem; color: var(--text-secondary);"></p>
                        </div>
                    </div>

                    <!-- Camera Modal for Mobile -->
                    <div id="cameraModal" class="camera-modal">
                        <video id="cameraStream" autoplay playsinline></video>
                        <div class="camera-controls">
                            <button type="button" onclick="closeCamera()"
                                style="background: #ef4444; color: white; border: none; padding: 12px 24px; border-radius: 8px; font-weight: 600;">منسوخ کریں</button>
                            <button type="button" onclick="capturePhoto()"
                                style="background: white; color: #000; border: none; width: 60px; height: 60px; border-radius: 50%; font-size: 24px;">📷</button>
                        </div>
                        <canvas id="cameraCanvas" style="display: none;"></canvas>
                    </div>

                    <div class="form-group">
                        <label>تبصرے</label>
                        <textarea name="remarks" class="form-textarea" rows="2"
                            placeholder="اضافی مشاہدات (اختیاری)"></textarea>
                    </div>

                    <div class="gps-status" id="gpsStatus">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <circle cx="8" cy="8" r="3" fill="currentColor" />
                        </svg>
                        <span id="gpsText">GPS حاصل کر رہے ہیں...</span>
                    </div>
                    <input type="hidden" name="gps_lat" id="gps_lat">
                    <input type="hidden" name="gps_lon" id="gps_lon">
                    <input type="hidden" name="gps_accuracy" id="gps_accuracy">

                    <div class="g-recaptcha" data-sitekey="6LcY9TksAAAAAOo51izipzTF1-bqyex-HyEjJn2Q"
                        style="margin: 20px 0;"></div>

                    <button type="submit" class="btn btn-primary" style="width: 100%;">رپورٹ جمع کرائیں</button>
                    <div id="formStatus" class="status-msg hidden"></div>
                </form>
            </div>

            <!-- Volunteer Page -->
            <div id="volunteerPage" class="hidden">
                <h1 class="page-title">رضاکار پورٹل</h1>

                <div style="display: flex; gap: 8px; margin-bottom: 24px;">
                    <button class="btn btn-primary" onclick="showVolunteerTab('register')">رجسٹر کریں</button>
                    <button class="btn btn-outline" onclick="showVolunteerTab('signin')">سائن ان کریں</button>
                </div>

                <div id="volunteerRegister" class="card">
                    <h3 style="margin-bottom: 16px; color: var(--primary-dark);">رضاکار کی رجسٹریشن</h3>
                    <form id="volunteerRegForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>صارف کا نام <span class="required">*</span></label>
                                <input type="text" name="username" class="form-input" required placeholder="آپ کا نام">
                            </div>
                            <div class="form-group">
                                <label>فون نمبر <span class="required">*</span></label>
                                <input type="tel" name="phone" class="form-input" required placeholder="رابطہ نمبر"
                                    minlength="10">
                            </div>
                        </div>

                        <div class="form-group">
                            <label>مہارتیں/دلچسپی کے شعبے</label>
                            <div class="checkbox-group" id="skillsGroup">
                                <label class="checkbox-item" onclick="toggleCheckbox(this, event)">
                                    <input type="checkbox" name="skills" value="Emergency Response">
                                    <span>ہنگامی ردعمل</span>
                                </label>
                                <label class="checkbox-item" onclick="toggleCheckbox(this, event)">
                                    <input type="checkbox" name="skills" value="Data Collection">
                                    <span>ڈیٹا اکٹھا کرنا</span>
                                </label>
                                <label class="checkbox-item" onclick="toggleCheckbox(this, event)">
                                    <input type="checkbox" name="skills" value="Community Outreach">
                                    <span>کمیونٹی آؤٹ ریچ</span>
                                </label>
                                <label class="checkbox-item" onclick="toggleCheckbox(this, event)">
                                    <input type="checkbox" name="skills" value="Technical Support">
                                    <span>تکنیکی معاونت</span>
                                </label>
                                <label class="checkbox-item" onclick="toggleCheckbox(this, event)">
                                    <input type="checkbox" name="skills" value="Coordination">
                                    <span>ہم آہنگی</span>
                                </label>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>دستیابی</label>
                            <div class="radio-group" id="availabilityGroup">
                                <label class="radio-item" onclick="selectRadio(this, 'availability', event)">
                                    <input type="radio" name="availability" value="weekdays">
                                    <span>ہفتے کے دن</span>
                                </label>
                                <label class="radio-item" onclick="selectRadio(this, 'availability', event)">
                                    <input type="radio" name="availability" value="weekends">
                                    <span>ویک اینڈ</span>
                                </label>
                                <label class="radio-item" onclick="selectRadio(this, 'availability', event)">
                                    <input type="radio" name="availability" value="both">
                                    <span>دونوں</span>
                                </label>
                                <label class="radio-item" onclick="selectRadio(this, 'availability', event)">
                                    <input type="radio" name="availability" value="emergency">
                                    <span>صرف ہنگامی</span>
                                </label>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary">رضاکار کے طور پر رجسٹر کریں</button>
                        <div id="regStatus" class="status-msg hidden"></div>
                    </form>
                </div>

                <div id="volunteerSignin" class="card hidden">
                    <h3 style="margin-bottom: 16px; color: var(--primary-dark);">رضاکار سائن ان</h3>
                    <form id="volunteerSigninForm">
                        <div class="form-group">
                            <label>فون نمبر <span class="required">*</span></label>
                            <input type="tel" name="phone" class="form-input" required
                                placeholder="رجسٹرڈ فون نمبر">
                        </div>
                        <button type="submit" class="btn btn-primary">سائن ان کریں</button>
                        <div id="signinStatus" class="status-msg hidden"></div>
                    </form>
                </div>

                <div id="volunteerDashboard" class="card hidden">
                    <h3>خوش آمدید، <span id="volName"></span>!</h3>
                    <p style="color: var(--text-secondary); margin: 8px 0;">مہارتیں: <span id="volSkills"></span></p>
                    <p style="color: var(--text-secondary);">دستیابی: <span id="volAvail"></span></p>
                    <button class="btn btn-outline" style="margin-top: 16px;" onclick="volunteerSignout()">سائن آؤٹ کریں</button>
                </div>
            </div>

            <!-- About Page -->
            <div id="aboutPage" class="hidden">
                <h1 class="page-title">AIResQ ClimSols</h1>
                <!-- <p class="page-subtitle">بارش سے لچک تک</p> -->

                <div class="card">
                    <h3 style="margin-bottom: 12px; color: var(--primary-dark);">ہمارا مشن</h3>
                    <p style="color: var(--text-secondary);">AIResQ ClimSols مؤثر آفات کے ردعمل کے لیے ٹیکنالوجی اور
                        کمیونٹی کی شرکت کا فائدہ اٹھانے کے لیے وقف ہے۔ ہمارا کراؤڈ سورسڈ سیلاب کی نگرانی
                        پلیٹ فارم ہنگامی جواب دہندگان اور کمیونٹیز کو باخبر فیصلے کرنے میں مدد کے لیے ریئل ٹائم ڈیٹا اکٹھا کرنے کے قابل بناتا ہے۔</p>
                </div>

                <div class="card">
                    <h3 style="margin-bottom: 12px; color: var(--primary-dark);">یہ کیسے کام کرتا ہے</h3>
                    <ul style="color: var(--text-secondary); padding-left: 20px; line-height: 1.8;">
                        <li>شہری بصری حوالہ اشیاء استعمال کرتے ہوئے سیلاب کی گہرائی کی اطلاع دیتے ہیں</li>
                        <li>GPS-ٹیگ شدہ رپورٹس جمع اور تصدیق کی جاتی ہیں</li>
                        <li>قابل عمل بصیرت کے لیے ڈیٹا کا تجزیہ کیا جاتا ہے</li>
                        <li>رضاکار ردعمل کی کوششوں میں ہم آہنگی پیدا کرتے ہیں</li>
                    </ul>
                </div>

                <div class="card">
                    <h3 style="margin-bottom: 12px; color: var(--primary-dark);">رابطہ</h3>
                    <p style="color: var(--text-secondary);">استفسارات، شراکت داری، یا معاونت کے لیے، براہ کرم ہماری ٹیم سے رابطہ کریں۔</p>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">© 2025 AIResQ ClimSols. All rights reserved.</div>
    </footer>

    <script src="/static/index.js"></script>
</body>

</html>
